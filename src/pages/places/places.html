<ion-header class="placeHeader">
  <ion-navbar color="primary">
    <ion-title>{{ params.category["title_"+lang] }}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content #container class="placesContent" scroll="false" >

  <div id="map" class="map" #map showWhen="android,ios"></div>
  <empty-view [text]="'ERROR_CORDOVA_MAPS' | translate" icon="map" showWhen="core"></empty-view>

  <empty-view *ngIf="isErrorViewVisible" icon="alert"
              [text]="'ERROR_PLACES' | translate">
  </empty-view>

  <empty-view *ngIf="isEmptyViewVisible" icon="map"
              [text]="'EMPTY_PLACES' | translate">
  </empty-view>

  <ion-slides pager class="ionSlides">
    <ion-slide *ngFor="let place of places" style="margin-top: 38px;width: 320px;">
      <ion-item (tap)="goToPlace(place)" color="dark" no-lines>
        <ion-thumbnail item-left>
          <img src="{{place.imageThumb.url()}}" offset="100"
               [lazyLoad]="place.imageThumb.url()"
               [scrollTarget]="container.getScrollElement()">
        </ion-thumbnail>
        <h2 class="bold" ion-text color="secondaru">{{ place["title_"+lang] }}</h2>
        <p>{{ place["description_"+lang] }}</p>
        <ion-note ion-text color="light" item-right>
          {{ place.distance(params.location, params.unit) }}
        </ion-note>
      </ion-item>
    </ion-slide>
  </ion-slides>

</ion-content>

<ion-footer>
  <ion-toolbar color="secondary" text-center>

    <vg-player class="vgPlayer">
      <vg-controls>
        <vg-play-pause [vgFor]="myAudio"></vg-play-pause>
        <vg-playback-button [vgFor]="myAudio"></vg-playback-button>

        <vg-scrub-bar class="scrum-bar">
          <vg-scrub-bar-current-time [vgFor]="myAudio"></vg-scrub-bar-current-time>
          <vg-scrub-bar-buffering-time [vgFor]="myAudio"></vg-scrub-bar-buffering-time>
        </vg-scrub-bar>

        <vg-time-display vgProperty="left" vgFormat="mm:ss" [vgFor]="myAudio"></vg-time-display>
      </vg-controls>
      <audio #media [vgMedia]="media" id="myAudio" preload="auto">
        <source *ngFor="let audio of nearAudio" [src]="audio" type="audio/mp3">
      </audio>
    </vg-player>

  </ion-toolbar>
</ion-footer>
